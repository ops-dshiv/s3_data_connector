# # version: '3'

# # services:
# #   zookeeper:
# #     image: zookeeper:3.7.0
# #     ports:
# #       - "2181:2181"

# #   kafka:
# #     image: wurstmeister/kafka:latest
# #     ports:
# #       - "9092:9092"
# #     environment:
# #       KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181
# #       KAFKA_LISTENER_SECURITY_PROTOCOL_MAP: INSIDE:PLAINTEXT,OUTSIDE:PLAINTEXT
# #       KAFKA_LISTENERS: INSIDE://kafka:9092,OUTSIDE://localhost:9093
# #       KAFKA_ADVERTISED_LISTENERS: INSIDE://kafka:9092,OUTSIDE://localhost:9093
# #       KAFKA_LISTENER_NAME: INSIDE
# #       KAFKA_LISTENER_SECURITY_PROTOCOL_MAP: INSIDE:PLAINTEXT,OUTSIDE:PLAINTEXT
# #       KAFKA_LISTENERS: INSIDE://kafka:9092,OUTSIDE://localhost:9093
# #       KAFKA_ADVERTISED_LISTENERS: INSIDE://kafka:9092,OUTSIDE://localhost:9093

# #   postgres:
# #     image: postgres:14
# #     environment:
# #       POSTGRES_USER: newuser
# #       POSTGRES_PASSWORD: password
# #       POSTGRES_DB: testdb
# #     ports:
# #       - "5432:5432"

# #   kafka-connect:
# #     image: confluentinc/cp-kafka-connect-base:latest
# #     ports:
# #       - "8083:8083"
# #     environment:
# #       CONNECT_BOOTSTRAP_SERVERS: kafka:9092
# #       CONNECT_REST_ADVERTISED_LISTENERS: http://localhost:8083
# #       CONNECT_GROUP_ID: "1"
# #       CONNECT_CONFIG_STORAGE_TOPIC: "connect-configs"
# #       CONNECT_OFFSET_FLUSH_INTERVAL_MS: 10000
# #       CONNECT_OFFSET_STORAGE_TOPIC: "connect-offsets"
# #       CONNECT_STATUS_STORAGE_TOPIC: "connect-status"
# #       CONNECT_KEY_CONVERTER: "org.apache.kafka.connect.storage.StringConverter"
# #       CONNECT_VALUE_CONVERTER: "org.apache.kafka.connect.storage.StringConverter"
# #       CONNECT_INTERNAL_KEY_CONVERTER: "org.apache.kafka.connect.storage.StringConverter"
# #       CONNECT_INTERNAL_VALUE_CONVERTER: "org.apache.kafka.connect.storage.StringConverter"
# #       CONNECT_CONFIG_STORAGE_REPLICATION_FACTOR: 1
# #       CONNECT_OFFSET_STORAGE_REPLICATION_FACTOR: 1
# #       CONNECT_STATUS_STORAGE_REPLICATION_FACTOR: 1

# #   # Optional: Kafka UI for monitoring
# #   kafka-ui:
# #     image: landoop/fast-data-dev:latest
# #     ports:
# #       - "8000:8000"
# #     depends_on:
# #       - kafka



# version: '3'

# services:
#   zookeeper:
#     image: zookeeper:3.7.0
#     ports:
#       - "2181:2181"

#   kafka:
#     image: wurstmeister/kafka:latest
#     ports:
#       - "9092:9092"
#     environment:
#       KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181
#       KAFKA_LISTENER_SECURITY_PROTOCOL_MAP: INSIDE:PLAINTEXT,OUTSIDE:PLAINTEXT
#       KAFKA_LISTENERS: INSIDE://kafka:9092,OUTSIDE://localhost:9093
#       KAFKA_ADVERTISED_LISTENERS: INSIDE://kafka:9092,OUTSIDE://localhost:9093
#       KAFKA_LISTENER_NAME: INSIDE

#   postgres:
#     image: postgres:14
#     environment:
#       POSTGRES_USER: newuser
#       POSTGRES_PASSWORD: password
#       POSTGRES_DB: testdb
#     ports:
#       - "5432:5432"

#   kafka-connect:
#     image: confluentinc/cp-kafka-connect-base:latest
#     ports:
#       - "8083:8083"
#     environment:
#       CONNECT_BOOTSTRAP_SERVERS: kafka:9092
#       CONNECT_REST_ADVERTISED_LISTENERS: http://localhost:8083
#       CONNECT_GROUP_ID: "1"
#       CONNECT_CONFIG_STORAGE_TOPIC: "connect-configs"
#       CONNECT_OFFSET_FLUSH_INTERVAL_MS: 10000
#       CONNECT_OFFSET_STORAGE_TOPIC: "connect-offsets"
#       CONNECT_STATUS_STORAGE_TOPIC: "connect-status"
#       CONNECT_KEY_CONVERTER: "org.apache.kafka.connect.storage.StringConverter"
#       CONNECT_VALUE_CONVERTER: "org.apache.kafka.connect.storage.StringConverter"
#       CONNECT_INTERNAL_KEY_CONVERTER: "org.apache.kafka.connect.storage.StringConverter"
#       CONNECT_INTERNAL_VALUE_CONVERTER: "org.apache.kafka.connect.storage.StringConverter"
#       CONNECT_CONFIG_STORAGE_REPLICATION_FACTOR: 1
#       CONNECT_OFFSET_STORAGE_REPLICATION_FACTOR: 1
#       CONNECT_STATUS_STORAGE_REPLICATION_FACTOR: 1

#   kafka-ui:
#     image: landoop/fast-data-dev:latest
#     ports:
#       - "8000:8000"
#     depends_on:
#       - kafka



version: '3'

services:
  zookeeper:
    image: zookeeper:3.7.0
    ports:
      - "2181:2181"

  kafka:
    image: wurstmeister/kafka:latest
    ports:
      - "9092:9092"
    environment:
      KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181
      KAFKA_LISTENER_SECURITY_PROTOCOL_MAP: INSIDE:PLAINTEXT,OUTSIDE:PLAINTEXT
      KAFKA_LISTENERS: INSIDE://kafka:9092,OUTSIDE://localhost:9093
      KAFKA_ADVERTISED_LISTENERS: INSIDE://kafka:9092,OUTSIDE://localhost:9093
      KAFKA_LISTENER_NAME: INSIDE

  postgres:
    image: postgres:14
    environment:
      POSTGRES_USER: newuser
      POSTGRES_PASSWORD: password
      POSTGRES_DB: testdb
    ports:
      - "5432:5432"

  kafka-connect:
    image: confluentinc/cp-kafka-connect-base:latest
    ports:
      - "8083:8083"
    environment:
      CONNECT_BOOTSTRAP_SERVERS: kafka:9092
      CONNECT_REST_ADVERTISED_LISTENERS: http://localhost:8083
      CONNECT_REST_ADVERTISED_HOST_NAME: kafka-connect
      CONNECT_GROUP_ID: "1"
      CONNECT_CONFIG_STORAGE_TOPIC: "connect-configs"
      CONNECT_OFFSET_FLUSH_INTERVAL_MS: 10000
      CONNECT_OFFSET_STORAGE_TOPIC: "connect-offsets"
      CONNECT_STATUS_STORAGE_TOPIC: "connect-status"
      CONNECT_KEY_CONVERTER: "org.apache.kafka.connect.storage.StringConverter"
      CONNECT_VALUE_CONVERTER: "org.apache.kafka.connect.storage.StringConverter"
      CONNECT_INTERNAL_KEY_CONVERTER: "org.apache.kafka.connect.storage.StringConverter"
      CONNECT_INTERNAL_VALUE_CONVERTER: "org.apache.kafka.connect.storage.StringConverter"
      CONNECT_CONFIG_STORAGE_REPLICATION_FACTOR: 1
      CONNECT_OFFSET_STORAGE_REPLICATION_FACTOR: 1
      CONNECT_STATUS_STORAGE_REPLICATION_FACTOR: 1

  kafka-ui:
    image: landoop/fast-data-dev:latest
    ports:
      - "8000:8000"
    depends_on:
      - kafka
